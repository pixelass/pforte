{"mappings":";;;;;;;;;;;;;;;;;AAAA;;;AAKe,kDAAwB,MAAM,EAAE;IAC9C,MAAM,IAAI,GAAG,CAAA,GAAA,4CAAO,CAAA,CAAC,GAAG,CAAC,UAAU,IAAI,CAAA,GAAA,4CAAO,CAAA,CAAC,GAAG,CAAC,UAAU,IAAI,uBAAuB,AAAC;IACzF,MAAM,WAAW,GAAG;QAAC,IAAI;QAAE,CAAA,GAAA,kCAAW,CAAA;KAAC,CAAC,IAAI,CAAC,GAAG,CAAC,AAAC;IAClD,MAAM,YAAE,QAAQ,CAAA,gBAAE,YAAY,CAAA,EAAE,GAAG,MAAM,AAAC;IAC1C,OAAO;QACN,GAAG,EAAE,CAAC,8DAA8D,EAAE,QAAQ,CAAC,cAAc,EAAE,WAAW,CAAC,CAAC;QAC5G,IAAI,EAAE,QAAQ;QACd,MAAM,OAAO,EAAC,WAAE,OAAO,CAAA,EAAE,EAAE;YAC1B,mBAAmB;YACnB,MAAM,EAAE,IAAI,EAAE,WAAW,CAAA,EAAE,GAAG,MAAM,CAAA,GAAA,sCAAK,CAAA,CAAC,IAAI,CAC7C,6CAA6C,EAC7C,EAAE,EACF;gBACC,MAAM,EAAE;oBACP,SAAS,EAAE,QAAQ;oBACnB,aAAa,EAAE,YAAY;oBAC3B,YAAY,EAAE,WAAW;oBACzB,IAAI,EAAE,OAAO,CAAC,KAAK,CAAC,IAAI;iBACxB;gBACD,OAAO,EAAE;oBACR,MAAM,EAAE,kBAAkB;iBAC1B;aACD,CACD,AAAC;YAEF,6BAA6B;YAC7B,MAAM,EAAE,IAAI,EAAE,IAAI,CAAA,EAAE,GAAG,MAAM,CAAA,GAAA,sCAAK,CAAA,CAAC,GAAG,CAAC,6BAA6B,EAAE;gBACrE,OAAO,EAAE;oBACR,aAAa,EAAE,CAAC,MAAM,EAAE,WAAW,CAAC,YAAY,CAAC,CAAC;iBAClD;aACD,CAAC,AAAC;YAEH,OAAO;sBAAE,IAAI;6BAAE,WAAW;aAAE,CAAC;SAC7B;KACD,CAAC;CACF","sources":["packages/provider-github/src/index.ts"],"sourcesContent":["import process from \"node:process\";\n\nimport { GITHUB_PATH } from \"@pforte/constants\";\nimport axios from \"axios\";\n\nexport default function githubProvider(config) {\n\tconst host = process.env.PFORTE_URL || process.env.VERCEL_URL || \"http://localhost:3000\";\n\tconst redirectUri = [host, GITHUB_PATH].join(\"/\");\n\tconst { clientId, clientSecret } = config;\n\treturn {\n\t\turl: `https://github.com/login/oauth/authorize?scope=user&client_id=${clientId}&redirect_uri=${redirectUri}`,\n\t\tname: \"github\",\n\t\tasync connect({ request }) {\n\t\t\t// Get access token\n\t\t\tconst { data: accessToken } = await axios.post(\n\t\t\t\t\"https://github.com/login/oauth/access_token\",\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tclient_id: clientId,\n\t\t\t\t\t\tclient_secret: clientSecret,\n\t\t\t\t\t\tredirect_uri: redirectUri,\n\t\t\t\t\t\tcode: request.query.code,\n\t\t\t\t\t},\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tAccept: \"application/json\",\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t);\n\n\t\t\t// Get user with access token\n\t\t\tconst { data: user } = await axios.get(\"https://api.github.com/user\", {\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `token ${accessToken.access_token}`,\n\t\t\t\t},\n\t\t\t});\n\n\t\t\treturn { user, accessToken };\n\t\t},\n\t};\n}\n"],"names":[],"version":3,"file":"index.js.map"}